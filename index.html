<!DOCTYPE html>
<html lang="he" dir="rtl" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>住驻专 转 砖</title>
  <meta name="description" content="住驻专 转  - 砖专,  驻砖 转 转 砖">
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#a7f3d0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="转">
  
  <!-- Favicon and Icons -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'></text></svg>">
  <link rel="apple-touch-icon" href="/icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png">
  <link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png">
  <link rel="apple-touch-icon" sizes="128x128" href="/icons/icon-128x128.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152x152.png">
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png">
  <link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png">
  <link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#a7f3d0", // Pale Mint
            "primary-hover": "#6ee7b7",
            "secondary": "#fda4af", // Soft Peach/Pink
            "accent": "#c4b5fd", // Lavender
            "background-light": "#fdfbf7", // Warm off-white
            "background-dark": "#0f172a", 
            "card-dark": "#1e293b",
            "card-light": "#ffffff",
          },
          fontFamily: {
            display: ["Outfit", "sans-serif"],
          },
          boxShadow: {
            'glow': '0 0 25px -5px rgba(167, 243, 208, 0.6)', 
            'glow-teal': '0 0 20px -5px rgba(45, 212, 191, 0.5)',
            'glow-hover': '0 0 35px -5px rgba(167, 243, 208, 0.8)',
            'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.07)',
            'soft': '0 10px 40px -10px rgba(0,0,0,0.08)',
            'glow-ai': '0 0 25px -5px rgba(196, 181, 253, 0.8)',
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'blob': 'blob 10s infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
            blob: {
              "0%": { transform: "translate(0px, 0px) scale(1)" },
              "33%": { transform: "translate(30px, -50px) scale(1.1)" },
              "66%": { transform: "translate(-20px, 20px) scale(0.9)" },
              "100%": { transform: "translate(0px, 0px) scale(1)" }
            }
          }
        },
      },
    };
  </script>
  
  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="styles/timer.css">
  
  <script>
    window.openMenu = function() { var e = document.getElementById('sideMenu'); if (e) e.style.width = '250px'; };
    window.closeMenu = function() { var e = document.getElementById('sideMenu'); if (e) e.style.width = '0'; };
    
    // Dark mode toggle
    function toggleDarkMode() {
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
    }
    
    // Load dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
      document.documentElement.classList.add('dark');
    }
  </script>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-800 dark:text-slate-100 font-display transition-colors duration-500 min-h-screen relative selection:bg-primary selection:text-slate-900">
  <!-- Animated Blobs -->
  <div class="blob-1"></div>
  <div class="blob-2"></div>
  <div class="blob-3"></div>
  
  <header class="header glass-panel">
    <button class="menu-icon" onclick="openMenu()">
        <div></div>
        <div></div>
        <div></div>
    </button>
    <h1>
      <div class="header-logo-icon">
        <span class="material-symbols-outlined">restaurant_menu</span>
      </div>
      住驻专 <span class="header-logo-gradient">转</span>
    </h1>
    <!-- Search Bar in Header -->
    <div class="header-search-container">
      <div class="header-search-wrapper">
        <span class="material-symbols-outlined header-search-icon">search</span>
        <input type="text" id="searchName" class="header-search-input" placeholder="驻砖 转..." oninput="filterRecipes()">
        <span class="material-symbols-outlined header-filter-icon" onclick="toggleFilterPanel()" title="驻转/住专 住">tune</span>
      </div>
    </div>
    <div class="header-controls">
      <button onclick="toggleDarkMode()" class="header-btn" title="爪 /专">
        <span class="material-symbols-outlined dark:hidden">dark_mode</span>
        <span class="material-symbols-outlined hidden dark:block" style="color: var(--primary-color);">light_mode</span>
      </button>
      <button id="show-timer-btn" class="header-btn" title="专">
        <i class="fas fa-bell"></i>
      </button>
      <div class="timer-container">
        <div class="timer-controls">
          <button id="timer-preset" class="timer-icon-btn" title=" 专 专砖">
            <i class="fas fa-clock"></i>
          </button>
          <button id="start-timer" class="timer-icon-btn" title="转">
            <i class="fas fa-play"></i>
          </button>
          <button id="pause-timer" class="timer-icon-btn" title="砖" style="display: none;">
            <i class="fas fa-pause"></i>
          </button>
          <button id="stop-timer" class="timer-icon-btn" title="注爪专" style="display: none;">
            <i class="fas fa-stop"></i>
          </button>
          <div class="timer-input-group">
            <input type="number" id="timer-hours" min="0" max="99" step="1" value="0" class="timer-input" placeholder="0">
            <span class="timer-separator">:</span>
            <input type="number" id="timer-minutes" min="0" max="59" step="1" value="1" class="timer-input" placeholder="0">
            <span class="timer-separator">:</span>
            <input type="number" id="timer-seconds" min="0" max="59" step="1" value="0" class="timer-input" placeholder="0">
          </div>
          <div class="timer-display" id="timer-display"></div>
        </div>
        <div id="timer-preset-menu" class="timer-preset-menu" style="display: none;">
          <button class="preset-btn" data-time="300">5 拽转</button>
          <button class="preset-btn" data-time="600">10 拽转</button>
          <button class="preset-btn" data-time="900">15 拽转</button>
          <button class="preset-btn" data-time="1800">30 拽转</button>
          <button class="preset-btn" data-time="3600">砖注</button>
        </div>
      </div>
    </div>
  </header>

  <!-- 转驻专 爪 -->
  <div id="sideMenu" class="side-menu">
    <a href="javascript:void(0)" class="closebtn" onclick="closeMenu()">&times;</a>
    <a href="#" onclick="openFormPopup(); closeMenu();">住驻转 转</a>
    <a href="#" onclick="openAiChat(); closeMenu();">砖 注 AI</a>
    <a href="#" onclick="downloadAllRecipes(); closeMenu();">专转  转</a>
    <a href="#" onclick="exportRecipes(); closeMenu();"> -JSON</a>
    <a href="#" onclick="document.getElementById('importJson').click(); closeMenu();"> -JSON</a>
    <input type="file" id="importJson" accept=".json" style="display: none;" onchange="importRecipes(event)">
    <hr>
    <p style="padding: 10px 20px; font-weight: bold;">爪 转 砖专:</p>
    <div class="recipes-per-row">
      <div class="grid-icon" id="grid4" onclick="setRecipesPerRow(4); closeMenu();"></div>
      <div class="grid-icon" id="grid5" onclick="setRecipesPerRow(5); closeMenu();"></div>
      <div class="grid-icon" id="grid6" onclick="setRecipesPerRow(6); closeMenu();"></div>
    </div>
  </div>

  <main class="main">
    <!-- Filter Panel -->
    <div class="main-filter-panel" id="searchContainer" style="display: none;">
      <div class="search-filters-row">
        <div class="search-filter-item">
          <span class="material-symbols-outlined search-filter-icon">shopping_basket</span>
          <input type="text" id="searchIngredients" class="search-filter-input" placeholder="驻砖 驻 爪专" oninput="filterRecipes()">
        </div>
        <div class="search-filter-item">
          <span class="material-symbols-outlined search-filter-icon">schedule</span>
          <input type="number" id="searchPrepTime" class="search-filter-input" placeholder="  (拽转)" min="0" oninput="filterRecipes()">
        </div>
        <div class="search-filter-item">
          <span class="material-symbols-outlined search-filter-icon">star</span>
          <div class="filter-rating" id="filterRating"></div>
        </div>
      </div>
    </div>
    <!-- Category Filter Buttons Row -->
    <div class="category-filter-row">
      <div class="category-filter" id="categoryFilter">
        <!-- 驻转专 拽专转 转住驻 转 -->
      </div>
    </div>
    
    
    <div class="recipes-container" id="recipesContainer"></div>
  </main>

  <!--  转 -->
  <div class="popup-overlay" id="popup">
    <div class="popup-content">
      <button class="close-btn" onclick="closePopup()">&times;</button>
      <div id="popupBody"></div>
    </div>
  </div>

  <!--  住驻转 转 -->
  <div class="popup-overlay" id="formPopup" style="display: none;">
    <div class="form-popup-content">
      <button class="close-btn" onclick="closeFormPopup()">&times;</button>
      <form id="recipeForm">
        <h2>住驻转 转 砖</h2>
        <input type="text" id="recipeName" placeholder="砖 转">
        <input type="text" id="recipeSource" placeholder="拽专 转">
        <textarea id="ingredients" placeholder="爪专"></textarea>
        <textarea id="instructions" placeholder="驻 "></textarea>
        <label for="preparationTime">  (拽转):</label>
        <input type="number" id="preparationTime" placeholder="  拽转" min="0">
        <label for="category">拽专:</label>
        <div class="category-input-container">
            <select id="category" required>
                <option value="" disabled selected>专 拽专</option>
            </select>
            <input type="text" id="newCategory" placeholder=" 住祝 拽专 砖" style="display: none;">
            <button type="button" id="toggleNewCategory" onclick="toggleCategoryInput()">+ 拽专 砖</button>
        </div>
        <textarea id="notes" placeholder="注专转"></textarea>
        <label for="recipeLink">拽砖专 转:</label>
        <input type="url" id="recipeLink" name="recipeLink" placeholder="https://">
        <label for="recipeVideo">拽砖专 住专 YouTube:</label>
        <input type="url" id="recipeVideo" name="recipeVideo" placeholder="https://www.youtube.com/watch?v=">
        <div class="file-upload-container">
          <input type="file" id="image" accept="image/*">
          <button type="button" onclick="document.getElementById('ocrImage').click()">OCR</button>
        </div>
        <input type="file" id="ocrImage" accept="image/*" onchange="processOCR(event)" style="display: none;">
        <button type="submit">砖专转 转</button>
      </form>
    </div>
  </div>

  <!-- 转专转  -->
  <div class="backup-reminder" id="backupReminder" style="display: none;">
    <span> !  转 转 转 砖   专.</span>
    <button onclick="closeBackupReminder()"></button>
  </div>

  <!-- 驻 爪' AI -->
  <div class="ai-chat-overlay" id="aiChatOverlay" style="display: none;">
    <div class="ai-chat-container">
      <!-- 驻 爪' 专砖 -->
      <div class="ai-chat-panel">
        <div class="ai-chat-header">
          <button class="close-btn" onclick="closeAiChat()" title="住专">&times;</button>
          <h3>
            <img src="assets/icons/chef-speaking.svg" alt="砖祝" class="chef-speaking">
            砖 注 AI
          </h3>
          <button class="history-toggle-btn" onclick="toggleChatHistory()" title="住专">
            <i class="fas fa-history"></i>
          </button>
        </div>
        <div class="ai-chat-messages" id="aiChatMessages"></div>
        <div class="ai-chat-attachments" id="aiChatAttachments" style="display: none;"></div>
        <div class="ai-chat-input-row">
          <button type="button" id="aiChatSend" onclick="sendAiMessage()" title="砖"><i class="fas fa-paper-plane"></i></button>
          <button type="button" id="aiChatVoice" onclick="toggleVoiceRecording()" title="拽 拽"><i class="fas fa-microphone"></i></button>
          <input type="text" id="aiChatInput" placeholder="砖 转, 拽砖 转,  爪专祝 转..." onkeydown="if(event.key==='Enter')sendAiMessage()">
          <button type="button" id="aiChatAttach" onclick="document.getElementById('aiChatFileInput').click()" title="爪专祝 转">
            <i class="fas fa-paperclip"></i>
          </button>
          <input type="file" id="aiChatFileInput" accept="image/*" multiple style="display: none;" onchange="handleChatFileSelect(event)">
        </div>
      </div>

      <!-- 住专 住专 -->
      <div class="ai-chat-history" id="aiChatHistory">
        <div class="ai-chat-history-header">
          <button class="new-chat-btn" onclick="startNewConversation()" title="砖 砖">
            <i class="fas fa-plus"></i>
          </button>
          <h4>住专</h4>
        </div>
        <div class="ai-chat-history-list" id="aiChatHistoryList"></div>
      </div>
    </div>
  </div>

  <!--  砖专 拽 -->
  <div class="popup-overlay" id="confirmPopup" style="display: none;">
    <div class="confirm-popup-content">
      <h3> 专爪 拽 转 转?</h3>
      <button class="confirm" onclick="deleteRecipe()">拽</button>
      <button class="cancel" onclick="closeConfirmPopup()"></button>
    </div>
  </div>

  <!-- Floating Action Buttons -->
  <div class="floating-actions">
    <button class="floating-action-btn ai-chat" onclick="openAiChat()" title="砖 注 AI">
      <img src="assets/icons/chef-speaking.svg" alt="砖祝" class="chat-btn-chef-icon">
    </button>
    <button class="floating-action-btn" onclick="openFormPopup()" title="住祝 转">
      <span class="material-symbols-outlined">add</span>
    </button>
  </div>

  <!-- 住驻专 爪转 -OCR -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@2.1.1/dist/tesseract.min.js"></script>
  <script type="module" src="js/main.js"></script>
</body>
</html>
